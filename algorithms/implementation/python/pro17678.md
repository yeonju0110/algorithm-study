# 📝 문제 풀이 보고서 
> [셔틀버스](https://school.programmers.co.kr/learn/courses/30/lessons/17678)

## ⏱️ 문제 풀이 시간
- 총 소요 시간: **60분**

---

## 📊 문제 난이도
- [x] 🟢 쉬움
- [ ] 🟡 보통
- [ ] 🔴 어려움

---

## ⚙️ 사용한 알고리즘
- **시뮬레이션**: 버스 운행을 시간 순서대로 시뮬레이션
- **그리디**: 콘은 가능한 한 늦게 도착하되, 마지막 버스만 고려
- **정렬**: 크루들의 도착 시간을 정렬하여 순서대로 처리

---

## 💡 풀이 과정 (생각의 흐름)

### 1단계: 문제 분석 및 접근법 고민
- n이 최대 10이고, 크루 수가 최대 2000이므로 **시뮬레이션 가능**
- 콘이 가장 늦게 도착하려면 **마지막 버스**를 노려야 함
- 핵심 케이스:
  1. 마지막 버스에 자리가 남음 → 버스 시간에 도착
  2. 마지막 버스가 꽉 참 → 마지막으로 탄 크루보다 1분 일찍 도착

### 2단계: 시간 처리 방법 결정
- HH:MM 형식을 분 단위(integer)로 변환하여 계산 단순화
- 09:00 = 540분으로 시작
- 결과는 다시 HH:MM 형식으로 변환

### 3단계: 시뮬레이션 설계
- 각 버스마다:
  - 현재 버스 시간 이하로 도착한 크루들을 최대 m명까지 태움
  - 마지막 버스라면 자리 여부에 따라 콘의 도착 시간 결정
  - 그 외 버스는 다음 버스로 진행

### 4단계: 엣지 케이스 고려
- 크루가 아무도 없는 경우: 콘은 마지막 버스 시간에 도착
- 모든 크루가 늦게 도착하는 경우: 콘은 마지막 버스 시간에 도착
- 마지막 버스가 정확히 꽉 차는 경우: 마지막 크루보다 1분 일찍

<img src="./images/011-01.jpeg" width="700px" />

---

## 💻 최종 코드

```python
from collections import deque

def solution(n, t, m, timetable):
    def toMinutes(time):
        h, m = time.split(":")
        return int(h) * 60 + int(m)
    
    def toTime(minutes):
        h = minutes // 60
        m = minutes % 60
        return f"{h:02}:{m:02}"
    
    # 크루 도착 시간을 분 단위로 변환 및 정렬
    crews = deque(sorted(toMinutes(time) for time in timetable))
    
    bus_time = 540  # 09:00을 분으로 표현
    last_crew = 0   # 마지막으로 탄 크루의 시간
    
    # 각 버스마다 크루를 태움
    for i in range(n):
        capacity = 0
        
        # 현재 버스에 탈 수 있는 크루들을 태움
        while crews and capacity < m and crews[0] <= bus_time:
            last_crew = crews.popleft()
            capacity += 1
        
        # 마지막 버스인 경우
        if i == n - 1:
            if capacity < m:  # 자리가 남으면 버스 시간에 도착
                return toTime(bus_time)
            else:  # 자리가 없으면 마지막 크루보다 1분 빨리
                return toTime(last_crew - 1)
        
        bus_time += t  # 다음 버스 시간
```

### 📈 복잡도 분석

#### 시간 복잡도:
- **O(K log K)** (K = 크루 수)
  - 정렬: O(K log K)
  - 시뮬레이션: O(K) - 각 크루를 한 번씩만 처리

#### 공간 복잡도:
- **O(K)**
  - 크루 도착 시간을 저장하는 deque

#### 실제 수치 (최악의 경우)
- n=10, t=60, m=45, timetable 길이=2000
- 시간: 2000 * log(2000) ≈ 22,000번 연산
- 공간: 2000개 원소 저장

---

## 🔑 핵심 인사이트

1. **마지막 버스만 고려**: 콘은 가장 늦게 도착하고 싶으므로 이전 버스는 무시
2. **1분 차이 전략**: 같은 시간에 도착하면 대기열 맨 뒤로 가므로, 자리가 없으면 1분 일찍 도착해서 선점
3. **시간 변환**: 문자열 시간을 정수(분)로 변환하여 계산 단순화

## 🎯 배운 점

- 시뮬레이션 문제에서 **불필요한 계산 줄이기**: 모든 버스를 다 확인하지만, 결정은 마지막 버스에서만
- **deque 활용**: 크루를 순서대로 처리할 때 popleft()로 O(1) 시간에 제거
- **조기 반환**: 마지막 버스에서 즉시 결과 반환하여 코드 간결화